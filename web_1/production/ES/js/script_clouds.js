var layers=[],objects=[],world=document.getElementById("world");viewport=document.getElementById("viewport"),d=0,p=400,worldXAngle=0,worldYAngle=0,viewport.style.webkitPerspective=p,viewport.style.MozPerspective=p,viewport.style.oPerspective=p;var width=0,height=0,rand=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)};$(function(){function t(){var t=document.createElement("div");t.className="cloudBase";var e=256-512*Math.random(),a=256-512*Math.random(),r=256-512*Math.random(),o="translateX( "+e+"px ) translateY( "+a+"px ) translateZ( "+r+"px )";t.style.webkitTransform=o,t.style.MozTransform=o,t.style.oTransform=o,world.appendChild(t);for(var n=0;n<5+Math.round(10*Math.random());n++){var l=document.createElement("img");l.style.opacity=0;var d=(Math.random(),"img/cloud.png");!function(t){t.addEventListener("load",function(){t.style.opacity=.8})}(l),l.setAttribute("src",d),l.className="cloudLayer";var e=256-512*Math.random(),a=0,r=100-200*Math.random(),s=360*Math.random(),i=.25+Math.random();e*=.2,a*=.2,l.data={x:e,y:a,z:r,a:s,s:i,speed:.1*Math.random(),rotation_speed:.05*Math.random()};var o="translateX( "+e+"px ) translateY( "+a+"px ) translateZ( "+r+"px ) rotateZ( "+s+"deg ) scale( "+i+" )";l.style.webkitTransform=o,l.style.MozTransform=o,l.style.oTransform=o,t.appendChild(l),layers.push(l)}return t}function e(){objects=[];for(var e=0;5>e;e++)objects.push(t())}function a(){var t="translateZ( "+d+"px ) rotateX( "+worldXAngle+"deg) rotateY( "+worldYAngle+"deg)";world.style.webkitTransform=t,world.style.MozTransform=t,world.style.oTransform=t}function r(){for(var t=0;t<layers.length;t++){var e=layers[t];e.data.a+=e.data.rotation_speed;var a="translateX( "+e.data.x+"px ) translateY( "+e.data.y+"px ) translateZ( "+e.data.z+"px ) rotateY( "+-worldYAngle+"deg ) rotateX( "+-worldXAngle+"deg ) rotateZ( "+e.data.a+"deg ) scale( "+e.data.s+")";e.style.webkitTransform=a,e.style.MozTransform=a,e.style.oTransform=a}requestAnimationFrame(r)}e();var o;window.addEventListener("mousemove",function(t){o=t.pageY,o>=80&&680>=o&&(worldYAngle=180*-(.5-t.clientX/window.innerWidth),worldYAngle/=20,worldXAngle=180*(.5-t.clientY/window.innerHeight),worldXAngle/=10,a())}),r()});