var star_layers=[],star_objects=[],star_layer,final_trajectory_difference=1e3;$(function(){function a(){var a=document.createElement("div");a.className="starBase";var r=Math.random();r=r>=.5?1:-1;var t=Math.random()*window.innerWidth*r,e=rand(-400,-800),n=256-512*Math.random(),s="translateX( "+t+"px ) translateY( "+e+"px ) translateZ( "+n+"px )";a.style.webkitTransform=s,a.style.MozTransform=s,a.style.oTransform=s,world.appendChild(a);for(var d=0;3>d;d++){var l=document.createElement("img");l.style.opacity=0;var o=(Math.random(),"img/star.png");!function(a){a.addEventListener("load",function(){a.style.opacity=.8})}(l),l.setAttribute("src",o),l.className="starLayer";var t=Math.random()*window.innerWidth*r,y=t-final_trajectory_difference,_=t+final_trajectory_difference,i=rand(y,_),e=rand(-400,-800),c=1200,f=Math.atan2(c-e,i-t),n=100-200*Math.random(),m=0,h=rand(30,120)/100;t*=.2,e*=.2,l.data={x:t,y:e,z:n,a:f*(180/Math.PI)-90,s:h,speed:rand(50,60)/10,acceleration:.009,acceleration:Math.random()/100,vx:0,vy:0,trajectory_angle:f,random:Math.random()};var s="translateX( "+t+"px ) translateY( "+e+"px ) translateZ( "+n+"px ) rotateZ( "+m+"deg ) scale( "+h+" )";l.style.webkitTransform=s,l.style.MozTransform=s,l.style.oTransform=s,a.appendChild(l),star_layers.push(l)}return a}function r(){star_objects=[];for(var r=0;5>r;r++)star_objects.push(a())}function t(){for(var a=0;a<star_layers.length;a++){star_layer=star_layers[a];var r=Math.random();r=r>=.5?1:-1,star_layer.data.y>=1200&&e(star_layer),star_layer.data.vx=Math.cos(star_layer.data.trajectory_angle)*star_layer.data.speed,star_layer.data.vy=Math.sin(star_layer.data.trajectory_angle)*star_layer.data.speed,star_layer.data.x+=star_layer.data.vx,star_layer.data.y+=star_layer.data.vy;var n="translateX( "+star_layer.data.x+"px ) translateY( "+star_layer.data.y+"px ) translateZ( "+star_layer.data.z+"px ) rotateY( "+-worldYAngle+"deg ) rotateX( "+-worldXAngle+"deg ) rotateZ( "+star_layer.data.a+"deg ) scale( "+star_layer.data.s+")";star_layer.style.webkitTransform=n,star_layer.style.MozTransform=n,star_layer.style.oTransform=n}requestAnimationFrame(t)}function e(a){var r=Math.random();r=r>=.5?1:-1;var t=Math.random()*window.innerWidth*r,e=t-final_trajectory_difference,n=t+final_trajectory_difference,s=rand(e,n),d=rand(-400,-800),l=1200;Math.atan2(l-d,s-t),100-200*Math.random(),rand(25,50)/100;a.data.x=t,a.data.y=d,a.data.trajectory_angle=Math.atan2(l-d,s-t),a.data.a=a.data.trajectory_angle*(180/Math.PI)-90}r(),t()});